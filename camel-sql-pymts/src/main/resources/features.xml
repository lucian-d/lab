<?xml version="1.0" encoding="UTF-8"?>
<features>
    <repository>mvn:org.apache.camel.karaf/apache-camel/3.4.0/xml/features</repository>

    <feature name="bluesql" version="1.0-SNAPSHOT">

        <!-- DataSource is automatically published with dataSourceName value below
        as the osgi.jndi.service.name.
        This config section creates \apache-karaf-4.2.8\etc\org.ops4j.datasource-myorders.cfg
        -->
        <config name="org.ops4j.datasource-payments">
            osgi.jdbc.driver.name=derby
            dataSourceName=jdbc/ds-payments
            url=jdbc:derby:memory:dbpymts;create=true
        </config>
        <!--
        NOTE:: When Karaf is first started, Java classes may not find this data source by JNDI name/other means
        and the bundle may be in a 'failed' state. Restarting the bundle will work around this issue.
        -->

        <feature>transaction</feature>
        <feature>jndi</feature>
        <feature>jdbc</feature>
        <feature>pax-jdbc-pool-dbcp2</feature>
        <feature>pax-jdbc-config</feature>
        <feature>pax-jdbc-derby</feature>

        <feature>camel</feature>
        <feature>camel-blueprint</feature>
        <feature>camel-sql</feature>

        <bundle>mvn:ld.lab.camel.sql/pymts-dataflow/1.0-SNAPSHOT</bundle>

    </feature>
</features>
